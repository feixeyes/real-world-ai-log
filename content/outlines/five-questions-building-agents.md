# Outline: Five Questions for Building Agents (串一次真实流程：X → 总结 → 公众号草稿箱)

> Working title (CN): 构建 Agent 需要关注的 5 个问题：我用一次「X→公众号草稿箱」把流程串起来

## 0. 开场：为什么我想把“造 Agent”写成一张清单

- 很多 Agent 的问题不是“跑不起来”，而是：不稳定、不可控、交付不了
- 我这次用一个真实任务做例子：读 X 的信息 → 总结 → 放进公众号草稿箱
- 目标：跑通之后抽象出 5 个必须回答的问题

## 1. 任务拆解：这个 Agent 到底要完成什么？（产品视角先行）

- 输入是什么：X 的 For you feed（最新 20 条）
- 输出是什么：
  - 1 分钟速读版（可转发）
  - 20 条明细列表
  - 进入公众号草稿箱的文章草稿
- 成功标准：人能复核；可重复；不靠运气

> 对应问题 5：产品形态（生成 vs 检索；对用户可见的“工件”）

## 2. 问题 1：会问——意图、输入、边界、职责、上下文

- 我在一开始必须问清楚的 5 类问题（给出模板）
  - 这次你要的“总结”是面向谁？口吻？长度？是否要引用原文？
  - “最新 20 条”是按时间还是按我看到的顺序？是否过滤转推/广告/NFL？
  - 边界：要不要登录？cookie 能不能提供？敏感信息如何处理？
  - 职责：我负责抓取/结构化；你负责判断是否值得写/是否发布
  - 上下文：这是一次性任务还是要固化成流程？

- 这次案例里，我们具体怎么问、怎么对齐

## 3. 问题 2：运行闭环——意图识别→规划→action→校验→反思

- 为什么一定要“规划在前”：先给方案、再动手
- 一个最小闭环：
  1) 意图识别（要总结什么、给谁看）
  2) 规划（抓取范围/结构/输出形式）
  3) action（抓取 X；整理 20 条）
  4) 校验（是否真是 20 条；是否登录态有效；输出是否符合长度）
  5) 反思（哪里卡了：审批、权限、反爬；怎么固化改进）

- 这次案例里我们遇到的真实卡点：
  - exec approval / 无法点按钮 → 改 gateway 配置
  - x.com cookie 注入

## 4. 问题 3：上下文与记忆——分层、分组、压缩、固化

- 三层：
  - 项目层（repo 里的规则/目录/风格）
  - 会话层（这次要抓 X、要发草稿箱）
  - 长期层（哪些要写进 MEMORY / 项目文档）

- 在这个案例里，我是怎么把关键事实“写下来”的：
  - repo 路径/结构
  - 登录方式（cookie 注入）
  - 产物落在 workspace 哪

- 什么该固化成文件：
  - 发布流程
  - cookie 注入脚本
  - 常用提示/检查清单

## 5. 问题 4：模型能力——动态规划、工具调用、动态生成工具（与边界）

- 模型能做：规划、拆任务、调用工具、生成结构化输出
- 模型不应做：未经确认就发布；瞎猜事实
- “动态生成工具”在真实工程里的位置：
  - 临时脚本 vs 可复用 skill
  - 什么时候要把脚本升格为 skill

- 这次案例：我们为什么选择 Playwright + cookie 注入

## 6. 收束：把一次成功变成可复用的“最小 Agent 模板”

- 最小模板（可复制粘贴的 checklist）：
  - 5 个问题
  - 运行闭环
  - 产物/工件清单
  - 风险/权限清单

- 下一步：把“X→草稿箱”升级成一键 workflow（但保留 human checkpoints）

## 附录（可选）

- 我这次实际用到的脚本/工具清单（简述，不写成教程）
- 常见失败模式（5 条）
